<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
          "http://www.mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dzfp.cloud.user.dao.NsztSwtzxxDao">
	<!--列表查询 -->
	<select id="queryNsztSwtzxxList" parameterType="java.util.Map" resultType="java.util.HashMap">
		SELECT 
			uuid,nsrsbh,gsmc,lx,ywx,
			nsxypj,sfdlhs,
			qysds_yysj,qysds_yysbzq,qysds_sl,qysds_ssyh,
			zzs_sbzq,zzs_sbzt,zzs_pppl,zzs_ppme,zzs_ppxe,zzs_zppl,zzs_zpme,zzs_zpxe,
			zffy_cjssl,zffy_jyffjsl,zffy_dffjsl,zffy_sljsjj,zffy_hdf,zffy_ghjf,zffy_cbj,
			yhs_sbzq,yhs_sbfs,fcs,cjr,cjsj,xgr,xgsj,kpr,skr,fhr
		from t_pt_nszt_swtzxx
		where 1=1

		<if test="gsmc !=null and gsmc !='' ">
			and gsmc like  concat(concat('%',#{gsmc}),'%')
		</if>
		<if test="lx !=null and lx !='' ">
			and lx = #{lx}
		</if>
		<if test="nsrsbh !=null and nsrsbh!=''">
			and nsrsbh like  concat(concat('%',#{nsrsbh}),'%')
		</if>
		<if test="ywx !=null and ywx !='' ">
			and ywx = #{ywx}
		</if>
		<if test="nsxypj !=null and nsxypj !='' ">
			and nsxypj = #{nsxypj}
		</if>
		<if test="qysds_yysbzq !=null and qysds_yysbzq !='' ">
			and qysds_yysbzq = #{qysds_yysbzq}
		</if>
		<if test="zzs_sbzq !=null and zzs_sbzq !='' ">
			and zzs_sbzq = #{zzs_sbzq}
		</if>
		<if test="yhs_sbzq !=null and yhs_sbzq !='' ">
			and yhs_sbzq = #{yhs_sbzq}
		</if>
		<if test="qysds_sl !=null and qysds_sl!=''">
			and qysds_sl like  concat(concat('%',#{qysds_sl}),'%')
		</if>
		<if test="zffy_cjssl !=null and zffy_cjssl!=''">
			and zffy_cjssl like  concat(concat('%',#{zffy_cjssl}),'%')
		</if>
		<if test="zffy_sljsjj !=null and zffy_sljsjj!=''">
			and zffy_sljsjj like  concat(concat('%',#{zffy_sljsjj}),'%')
		</if>
		<if test="zffy_hdf !=null and zffy_hdf!=''">
			and zffy_hdf like  concat(concat('%',#{zffy_hdf}),'%')
		</if><if test="zffy_ghjf !=null and zffy_ghjf!=''">
		and zffy_ghjf like  concat(concat('%',#{zffy_ghjf}),'%')
		</if>
		<if test="zffy_cbj !=null and zffy_cbj!=''">
			and zffy_cbj like  concat(concat('%',#{zffy_cbj}),'%')
		</if>
	 	order by cjsj  desc
	</select>
	
	<select id="getExcel" resultType="java.util.Map" parameterType="java.util.Map">
		select ${sql} 
		from t_pt_nszt_swtzxx 
		where 1=1 
		 
	 	<if test="gsmc !=null and gsmc !='' ">
	 		and gsmc = #{gsmc}
	 	</if>
	 	<if test="lx !=null and lx !='' ">
	 		and lx = #{lx}
	 	</if>
	 	<if test="nsrsbh !=null and nsrsbh !=''">
	   	     and nsrsbh = #{nsrsbh}
   		 </if>
	 	group by uuid
	 	order by cjsj  desc
	</select>
	
	<select id="queryNsztSwtzxxIsExists" parameterType="java.util.Map" resultType="int">
		select  count(*) count
		from t_pt_nszt_swtzxx  where 1=1 
		<if test="nsrsbh !=null and nsrsbh !='' ">
	 		and nsrsbh = #{nsrsbh}
	 	</if>
	 	<if test="uuid !=null and uuid !='' ">
	 		and uuid != #{uuid}
	 	</if>
	</select>
	
	<insert id="saveNsztSwtzxx" parameterType="java.util.Map">
		INSERT INTO t_pt_nszt_swtzxx 
			(uuid,nsrsbh,gsmc,lx,ywx,
			nsxypj,sfdlhs,
			qysds_yysj,qysds_yysbzq,qysds_sl,qysds_ssyh,
			zzs_sbzq,zzs_sbzt,zzs_pppl,zzs_ppme,zzs_ppxe,zzs_zppl,zzs_zpme,zzs_zpxe,
			zffy_cjssl,zffy_jyffjsl,zffy_dffjsl,zffy_sljsjj,zffy_hdf,zffy_ghjf,zffy_cbj,
			yhs_sbzq,yhs_sbfs,fcs,cjr,cjsj,ssjtnsrsbh,kpr,fhr,skr)
		VALUES 
			(#{uuid},#{nsrsbh}, #{gsmc}, #{lx},#{ywx},
			#{nsxypj},#{sfdlhs},
			#{qysds_yysj}, #{qysds_yysbzq},#{qysds_sl},#{qysds_ssyh},
			#{zzs_sbzq},#{zzs_sbzt}, #{zzs_pppl},#{zzs_ppme},#{zzs_ppxe},#{zzs_zppl},#{zzs_zpme},#{zzs_zpxe},
			#{zffy_cjssl},#{zffy_jyffjsl},#{zffy_dffjsl},#{zffy_sljsjj},#{zffy_hdf},#{zffy_ghjf},#{zffy_cbj},
			#{yhs_sbzq},#{yhs_sbfs},#{fcs},#{cjr},now(),#{ssjtnsrsbh},#{swtz_kpr},#{swtz_skr},#{swtz_fhr})
	</insert> 
	
	<update id="updateNsztSwtzxx" parameterType="java.util.Map">
		update t_pt_nszt_swtzxx set
			nsrsbh=#{nsrsbh},gsmc=#{gsmc},lx=#{lx},ywx=#{ywx},
			nsxypj=#{nsxypj},sfdlhs=#{sfdlhs},
			qysds_yysj=#{qysds_yysj},qysds_yysbzq=#{qysds_yysbzq},qysds_sl=#{qysds_sl},qysds_ssyh=#{qysds_ssyh},
			zzs_sbzq=#{zzs_sbzq},zzs_sbzt=#{zzs_sbzt},zzs_pppl=#{zzs_pppl},zzs_ppme=#{zzs_ppme},zzs_ppxe=#{zzs_ppxe},zzs_zppl=#{zzs_zppl},zzs_zpme=#{zzs_zpme},zzs_zpxe=#{zzs_zpxe},
			zffy_cjssl=#{zffy_cjssl},zffy_jyffjsl=#{zffy_jyffjsl},zffy_dffjsl=#{zffy_dffjsl},zffy_sljsjj=#{zffy_sljsjj},zffy_hdf=#{zffy_hdf},zffy_ghjf=#{zffy_ghjf},zffy_cbj=#{zffy_cbj},
			yhs_sbzq=#{yhs_sbzq},yhs_sbfs=#{yhs_sbfs},fcs=#{fcs},xgr=#{xgr},xgsj=now(),ssjtnsrsbh=#{ssjtnsrsbh} ,kpr=#{swtz_kpr},skr=#{swtz_skr},fhr=#{swtz_fhr}
		where uuid = #{uuid}
	</update>
	
	<delete id="deleteNsztSwtzxx" parameterType="String" flushCache="false">
		delete from t_pt_nszt_swtzxx
		where
		uuid in
		<foreach collection="list" index="index" item="item" open="(" separator="," close=")">
			#{item.uuid}
		</foreach>
	</delete>


	<insert id="saveNsztSwtzxxList" parameterType="java.util.ArrayList">
		insert into t_pt_nszt_swtzxx (
				uuid,
				nsrsbh,
				gsmc,
				lx,
				ywx,
				nsxypj,
				sfdlhs,
				qysds_yysj,
				qysds_yysbzq,
				qysds_sl,
				qysds_ssyh,
				zzs_sbzq,
				zzs_sbzt,
				zzs_pppl,
				zzs_ppme,
				zzs_ppxe,
				zzs_zppl,
				zzs_zpme,
				zzs_zpxe,
				zffy_cjssl,
				zffy_jyffjsl,
				zffy_dffjsl,
				zffy_sljsjj,
				zffy_hdf,
				zffy_ghjf,
				zffy_cbj,
				yhs_sbzq,
				yhs_sbfs,
				fcs,
				cjr,
				cjsj,
				xgr,
				xgsj,
				ssjtnsrsbh,kpr,skr,fhr)
		values
		<foreach collection="list" item="check" separator=",">
		<trim prefix="(" suffix=")" suffixOverrides=",">
			REPLACE(UUID(),'-',''),
			<choose>
				<when test="check.nsrsbh != null">
					#{check.nsrsbh,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.gsmc != null">
					#{check.gsmc,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.lx != null">
					#{check.lx,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.ywx != null">
					#{check.ywx,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.nsxypj != null">
					#{check.nsxypj,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.sfdlhs != null">
					#{check.sfdlhs,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.qysdsYysj != null">
					#{check.qysdsYysj,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.qysdsYysbzq != null">
					#{check.qysdsYysbzq,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.qysdsSl != null">
					#{check.qysdsSl,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.qysdsSsyh != null">
					#{check.qysdsSsyh,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.zzsSbzq != null">
					#{check.zzsSbzq,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.zzsSbzt != null">
					#{check.zzsSbzt,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.zzsPppl != null">
					#{check.zzsPppl,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.zzsPpme != null">
					#{check.zzsPpme,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.zzsPpxe != null">
					#{check.zzsPpxe,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.zzsZppl != null">
					#{check.zzsZppl,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.zzsZpme != null">
					#{check.zzsZpme,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.zzsZpxe != null">
					#{check.zzsZpxe,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.zffyCjssl != null">
					#{check.zffyCjssl,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.zffyJyffjsl != null">
					#{check.zffyJyffjsl,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.zffyDffjsl != null">
					#{check.zffyDffjsl,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.zffySljsjj != null">
					#{check.zffySljsjj,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.zffyHdf != null">
					#{check.zffyHdf,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.zffyGhjf != null">
					#{check.zffyGhjf,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.zffyCbj != null">
					#{check.zffyCbj,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.yhsSbzq != null">
					#{check.yhsSbzq,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.yhsSbfs != null">
					#{check.yhsSbfs,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.fcs != null">
					#{check.fcs,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.cjr != null">
					#{check.cjr,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.cjsj != null">
					#{check.cjsj,jdbcType=DATE},
				</when >
				<otherwise>SYSDATE(),</otherwise>
			</choose>
			<choose>
				<when test="check.xgr != null">
					#{check.xgr,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.xgsj != null">
					#{check.xgsj,jdbcType=DATE},
				</when >
				<otherwise>null,</otherwise>
			</choose>
			<choose>
				<when test="check.ssjtnsrsbh != null">
					#{check.ssjtnsrsbh,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>

			<choose>
				<when test="check.kpr != null">
					#{check.kpr,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>

			<choose>
				<when test="check.skr != null">
					#{check.skr,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>

			<choose>
				<when test="check.fhr != null">
					#{check.fhr,jdbcType=VARCHAR},
				</when >
				<otherwise>null,</otherwise>
			</choose>
		</trim>
		</foreach>
	</insert>


	<select id="saveNsztSwtzxxListNsrsbh" resultType="map" parameterType="java.util.List">
		select count(1) as cou from t_pt_nszt_swtzxx where nsrsbh in
		<foreach collection="list" index="index" item="item" open="(" separator="," close=")">
			#{item.nsrsbh}
		</foreach>
	</select>


</mapper>